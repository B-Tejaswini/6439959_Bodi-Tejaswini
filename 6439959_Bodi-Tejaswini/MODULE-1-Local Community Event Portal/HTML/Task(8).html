<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Local Community Event Portal</title>
  <style>
    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    nav {
      background-color: #f2f2f2;
      padding: 10px;
    }

    nav a {
      margin-right: 15px;
      text-decoration: none;
      color: #333;
    }

    section {
      padding: 20px;
      margin: 20px;
      border-top: 1px solid #ccc;
    }

    #welcomeBanner {
      background-color: #007BFF;
      color: white;
      text-align: center;
      padding: 15px;
      font-size: 1.2em;
    }

    .highlight {
      background-color: yellow;
      padding: 2px 4px;
      border-radius: 3px;
    }

    table {
      width: 100%;
      text-align: center;
      border-collapse: collapse;
      margin-top: 20px;
    }

    caption {
      font-size: 1.3em;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .eventImage {
      width: 100%;
      max-width: 200px;
      border: 3px solid #555;
      border-radius: 10px;
      padding: 5px;
      cursor: pointer;
      transition: width 0.3s ease;
    }

    form {
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 8px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    input, select, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 4px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    button {
      background-color: #007BFF;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    output {
      display: block;
      margin-top: 10px;
      color: green;
      font-weight: bold;
    }

    footer {
      text-align: center;
      background-color: #f2f2f2;
      padding: 15px;
      font-size: 14px;
    }

    #videoMsg {
      color: green;
      font-weight: bold;
      margin-top: 10px;
    }

    #phoneMsg {
      font-size: 0.9em;
      margin-top: -8px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <!-- Welcome Banner -->
  <div id="welcomeBanner">
    Welcome back, <strong class="highlight">Tejaswini</strong>!
    <span style="color: red; font-weight: bold;">Don't miss our upcoming Summer Fest!</span>
  </div>

  <!-- Navigation -->
  <nav>
    <a href="#home">Home</a>
    <a href="#events">Events</a>
    <a href="#contact">Contact</a>
    <a href="#gallery">Gallery</a>
    <a href="#registration">Register</a>
    <a href="#feedback">Feedback</a>
    <a href="#video">Promo Video</a>
    <a href="help.html" target="_blank">Help</a>
  </nav>

  <!-- Main Content -->
  <main>

    <!-- Home Section -->
    <section id="home">
      <h1>Welcome to the <span class="highlight">Local Community Event Portal</span></h1>
      <p>This portal helps you find and register for <span class="highlight">local events</span> easily.</p>
    </section>

    <!-- Events Section -->
    <section id="events">
      <h2>Upcoming Events</h2>
      <p>Stay tuned for <span class="highlight">community events</span> happening near you!</p>
    </section>

    <!-- Contact Section -->
    <section id="contact">
      <h2>Contact Us</h2>
      <p>Email: support@localportal.com</p>
      <p>Phone: +1-234-567-8900</p>
    </section>

    <!-- Image Gallery Section -->
    <section id="gallery">
      <h2>Past Community Events</h2>
      <table>
        <caption>Memories from Previous Events</caption>
        <tr>
          <td>
            <img src="event1.jpg" alt="Music Festival" title="Music Festival 2024" class="eventImage" ondblclick="enlargeImage(this)">
            <p><strong>Music Festival</strong></p>
          </td>
          <td>
            <img src="event2.jpg" alt="Tree Plantation Drive" title="Tree Plantation Drive" class="eventImage" ondblclick="enlargeImage(this)">
            <p><strong>Tree Plantation</strong></p>
          </td>
          <td>
            <img src="event3.jpg" alt="Food Donation Camp" title="Food Donation Camp" class="eventImage" ondblclick="enlargeImage(this)">
            <p><strong>Food Donation</strong></p>
          </td>
        </tr>
        <tr>
          <td>
            <img src="event4.jpg" alt="Independence Day Parade" title="Parade Celebration" class="eventImage" ondblclick="enlargeImage(this)">
            <p><strong>Independence Day</strong></p>
          </td>
          <td>
            <img src="event5.jpg" alt="Art & Craft Exhibition" title="Exhibition 2024" class="eventImage" ondblclick="enlargeImage(this)">
            <p><strong>Art Exhibition</strong></p>
          </td>
          <td>
            <img src="event6.jpg" alt="Yoga Session in Park" title="Morning Yoga" class="eventImage" ondblclick="enlargeImage(this)">
            <p><strong>Yoga in the Park</strong></p>
          </td>
        </tr>
      </table>
    </section>

    <!-- Event Registration Form Section -->
    <section id="registration">
      <h2>Register for an Event</h2>
      <form id="eventForm" onsubmit="handleSubmit(event)">
        <label for="name">Full Name:</label>
        <input type="text" id="name" name="name" placeholder="Enter your full name" required autofocus>

        <label for="email">Email Address:</label>
        <input type="email" id="email" name="email" placeholder="example@email.com" required>

        <label for="date">Event Date:</label>
        <input type="date" id="date" name="date" required>

        <label for="eventType">Select Event Type:</label>
        <select id="eventType" name="eventType" required onchange="saveEventPreference()">
          <option value="">--Choose an event--</option>
          <option value="Music Festival">Music Festival</option>
          <option value="Tree Plantation">Tree Plantation</option>
          <option value="Food Donation">Food Donation</option>
          <option value="Yoga Session">Yoga Session</option>
        </select>

        <label for="message">Additional Message:</label>
        <textarea id="message" name="message" rows="4" cols="40" placeholder="Your message..."></textarea>

        <button type="submit">Submit Registration</button>
        <button type="button" onclick="clearPreferences()">Clear Preferences</button>

        <output id="confirmation"></output>
      </form>
    </section>

    <!-- Feedback Section -->
    <section id="feedback">
      <h2>Event Feedback</h2>
      <form id="feedbackForm">
        <label for="phone">Phone Number:</label>
        <input type="text" id="phone" name="phone" placeholder="10-digit phone number" onblur="validatePhone()" required>
        <span id="phoneMsg"></span>

        <label for="eventFee">Select Event:</label>
        <select id="eventFeeSelect" onchange="displayFee()">
          <option value="">--Choose an event--</option>
          <option value="100">Music Festival</option>
          <option value="50">Tree Plantation</option>
          <option value="70">Food Donation</option>
          <option value="30">Yoga Session</option>
        </select>
        <p><strong>Event Fee: â‚¹<span id="feeDisplay">0</span></strong></p>

        <label for="feedbackMsg">Your Feedback:</label>
        <textarea id="feedbackMsg" rows="4" cols="50" placeholder="Type your feedback..." onkeyup="countChars()"></textarea>
        <p>Characters typed: <span id="charCount">0</span></p>

        <button type="button" onclick="showFeedbackConfirm()">Submit Feedback</button>
        <p id="feedbackConfirm" style="color:green;"></p>
      </form>

      <h3>Double-click an image to zoom</h3>
      <img src="event1.jpg" alt="Event" id="zoomImg" ondblclick="enlargeImage(this)" style="width:200px; border:2px solid black; border-radius:10px; cursor:pointer;">
    </section>

    <!-- Promo Video Section -->
    <section id="video">
      <h2>Watch Our Promo Video</h2>
      <video width="400" controls oncanplay="videoReadyMsg()">
        <source src="promo.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p id="videoMsg"></p>
    </section>

  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Local City Council. All rights reserved.</p>
  </footer>

  <!-- JavaScript -->
  <script>
    // Flag to detect unsaved form changes
    let formChanged = false;

    // Save event preference to localStorage and sessionStorage
    function saveEventPreference() {
      const eventType = document.getElementById('eventType').value;
      if (eventType) {
        localStorage.setItem('preferredEventType', eventType);
        sessionStorage.setItem('preferredEventType', eventType);
      }
      formChanged = true;
    }

    // Load saved event preference on page load
    window.onload = function() {
      // Load preferred event type from localStorage
      const savedEvent = localStorage.getItem('preferredEventType');
      if (savedEvent) {
        const select = document.getElementById('eventType');
        select.value = savedEvent;
      }
    };

    // Clear preferences from storage
    function clearPreferences() {
      localStorage.removeItem('preferredEventType');
      sessionStorage.removeItem('preferredEventType');
      document.getElementById('eventType').value = '';
      alert('Preferences cleared!');
      formChanged = false;
    }

    // Registration form submission handler
    function handleSubmit(event) {
      event.preventDefault();
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const date = document.getElementById('date').value;
      const eventType = document.getElementById('eventType').value;
      if (!name || !email || !date || !eventType) {
        alert('Please fill all required fields.');
        return;
      }
      document.getElementById('confirmation').textContent = 
        `Thank you, ${name}! You have registered for the ${eventType} on ${date}.`;
      formChanged = false;
      event.target.reset();
    }

    // Phone number validation on blur
    function validatePhone() {
      const phoneInput = document.getElementById('phone');
      const phoneMsg = document.getElementById('phoneMsg');
      const phone = phoneInput.value.trim();
      const phonePattern = /^\d{10}$/;
      if (!phonePattern.test(phone)) {
        phoneMsg.textContent = "Invalid phone number. Must be 10 digits.";
        phoneMsg.style.color = 'red';
      } else {
        phoneMsg.textContent = "Phone number looks good.";
        phoneMsg.style.color = 'green';
      }
    }

    // Display event fee on change of event dropdown
    function displayFee() {
      const select = document.getElementById('eventFeeSelect');
      const feeDisplay = document.getElementById('feeDisplay');
      feeDisplay.textContent = select.value || '0';
    }

    // Show confirmation on feedback submit button click
    function showFeedbackConfirm() {
      const feedbackConfirm = document.getElementById('feedbackConfirm');
      feedbackConfirm.textContent = "Thank you for your feedback!";
    }

    // Enlarge image on double click
    function enlargeImage(img) {
      if (img.style.width === '400px') {
        img.style.width = '200px';
      } else {
        img.style.width = '400px';
      }
    }

    // Count characters in feedback textarea
    function countChars() {
      const feedback = document.getElementById('feedbackMsg').value;
      document.getElementById('charCount').textContent = feedback.length;
    }

    // Show video ready message on canplay event
    function videoReadyMsg() {
      document.getElementById('videoMsg').textContent = "Video ready to play.";
    }

    // Warn users if they try to leave the page with unsaved form changes
    window.onbeforeunload = function(e) {
      if (formChanged) {
        const confirmationMessage = 'You have unsaved changes. Are you sure you want to leave?';
        (e || window.event).returnValue = confirmationMessage;
        return confirmationMessage;
      }
    };

    // Mark formChanged true when inputs change to warn on unload
    document.getElementById('eventForm').addEventListener('change', () => formChanged = true);
    document.getElementById('eventForm').addEventListener('input', () => formChanged = true);

  </script>

</body>
</html>
